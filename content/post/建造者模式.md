+++
tags = ["设计模式"]
title = "建造者模式"
draft = false
date = "2017-01-24T10:54:24+02:00"

+++



建造者模式：是将一个复杂的对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。


##### 建造者模式通常包括下面几个角色：

1. builder：给出一个抽象接口，以规范产品对象的各个组成成分的建造。这个接口规定要实现复杂对象的哪些部分的创建，并不涉及具体的对象部件的创建。

2. ConcreteBuilder：实现Builder接口，针对不同的商业逻辑，具体化复杂对象的各部分的创建。 在建造过程完成后，提供产品的实例。

3. Director：调用具体建造者来创建复杂对象的各个部分，在指导者中不涉及具体产品的信息，只负责保证对象各部分完整创建或按某种顺序创建。

4. Product：要创建的复杂对象。

　　按照惯例，还是给出建造者模式的结构图

![](http://i.imgur.com/wQYnDin.jpg)



##### 使用建造者模式的好处：

1.使用建造者模式可以使客户端不必知道产品内部组成的细节。

2.具体的建造者类之间是相互独立的，对系统的扩展非常有利。

3.由于具体的建造者是独立的，因此可以对建造过程逐步细化，而不对其他的模块产生任何影响。


##### 使用建造模式的场合：

1.创建一些复杂的对象时，这些对象的内部组成构件间的建造顺序是稳定的，但是对象的内部组成构件面临着复杂的变化。

2.要创建的复杂对象的算法，独立于该对象的组成部分，也独立于组成部分的装配方法时。



##### 比较

建造模式：builder实现类里只是赋值，更改变量的值，真正通过调用方法创建完整对象是在Director中进行。

工厂方法模式：是根据创建者也就是实现builder的类直接创建对象了，没有通过director来创建，这样的话，再进行扩展的时候，添加抽象方法和实现类，如果创建对象的方法是固定的而且是比较复杂的时候，你可能会弄乱，或弄错，因为你直接通过builder来建了，对创建过程没有约束，而建造模式的director就是对过程的约束，必须经过什么过程，必须采取哪些操作，这样会比直接调用工厂方法创建的对象要有保障。

所以，我觉得两个方法的主要不同点是是否规定了创建的过程，也就是是否有director这个导演类，这种对创建过程的规范有利于提高程序的正确性，尤其是进行扩展时。

如果对象创建比较简单，也就没有必要控制创建的过程了，可以使用工厂类，如果比较复杂，而且顺序有规定，就需要建造者模式了。