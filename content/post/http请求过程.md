+++
tags = ["web"]
title = "http请求过程"
draft = false
date = "2017-02-14T22:54:24+02:00"

+++

http属于Tcp/Ip模型中的应用层协议

两个应用程序（我们这里指的就是浏览器与服务器）之间要进行互相通信，首先得建立Tcp连接，然后浏览器才能向服务器发送请求信息，服务器在接受到请求信息后，返回相应的应答信息，浏览器接收到来自服务器的应答信息后，对这些数据进行解释执行。

http 1.0的版本中，浏览器的每次请求（也就是对每一个页面的访问）都要求建立一次单独的连接，在处理完每一次的请求后，就自动释放连接

![](http://i.imgur.com/kPRYP4S.jpg)


http 1.1则可以在一次连接中处理多个请求，并且多个请求可以重叠进行，不需要等待一个请求结束后再发送下一个请求。


![](http://i.imgur.com/fN9Bxpj.jpg)




1、获取IP。浏览器地址栏中输入"http://www.xxx.edu.cn/"并提交之后，首先它会在DNS本地缓存表中查找，如果有则直接告诉IP地址。如果没有则要求网关DNS进行查找，如此下去，当找到对应的ip后，则返回给浏览器。

2、建立TCP连接。当获取到IP之后，就开始与所请求的服务器建立TCP连接，你可以在下图中发现syn,ack，这些标识符就是用来同步用的。

3、连接建立后，就向服务器发出http请求(大家可以从图中看出来)。如果是HTTP1.0的版本则，每一次请求结束后，就释放TCP连接。


![](http://i.imgur.com/YqbnTT8.jpg)



 HTTP 1.1的持续连接，也需要增加新的请求头来帮助实现，例如，Connection请求头的值为Keep-Alive时，客户端通知服务器返回本次请求结果后保持连接；Connection请求头的值为close时，客户端通知服务器返回本次请求结果后关闭连接。
HTTP 1.1还提供了与身份认证、状态管理和Cache缓存等机制相关的请求头和响应头。

HTTP1.1支持持久连接，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟。一个包含有许多图像的网页文件的多个请求和应答可以在一个连接中传输，但每个单独的网页文件的请求和应答仍然需要使用各自的连接。HTTP 1.1还允许客户端不用等待上一次请求结果返回，就可以发出下一次请求，但服务器端必须按照接收到客户端请求的先后顺序依次回送响应结果，以保证客户端能够区分出每次请求的响应内容，这样也显著地减少了整个下载过程所需要的时间。基于HTTP 1.1协议的客户机与服务器的信息交换过程


